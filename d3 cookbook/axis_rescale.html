<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Axis Rescaling</title>
        <link rel="stylesheet" href="../css/styles.css"/>
        <script src="../lib/d3.js"></script>
    </head>
    <body>
        <script>

            var color = d3.scale.category10();

            var data = [
                {"x": 50, "y": 50}, {"x": 50, "y": 400},
                {"x": 100, "y": 50}, {"x": 100, "y": 400},
                {"x": 150, "y": 50}, {"x": 150, "y": 400},
                {"x": 200, "y": 50}, {"x": 200, "y": 400},
                {"x": 250, "y": 50}, {"x": 250, "y": 400},
                {"x": 300, "y": 50}, {"x": 300, "y": 400},
            ];
   
            var line = d3.svg.line()
                        .x(function(d){ return d.x; })
                        .y(function(d){ return d.y; })
                        .interpolate("linear");

            var svg = d3.select("body").append("svg")
                        .attr("width", 1500)
                        .attr("height", 1500);

     /*       var lines = svg.append("path")
                            .attr("d", line(data))
                            .attr("stroke", "black")
                            .attr("stroke-width", 2)
                            .attr("fill", "none");
                        */

            for( var i = 0; i < 7; i++ ){
                var lines = svg.append("line")
                                .attr("x1", 10 + i*50 +500)
                                .attr("y1", 10 +50)
                                .attr("x2", 10 + i*50 +500)
                                .attr("y2", 310+50)
                                .attr("stroke", "black")
                                .attr("stroke-width", 1)
                                .attr("fill", "none");

                svg.append("line")
                                .attr("x1", 10 +500)
                                .attr("y1", 10 + i*50+50)
                                .attr("x2", 310 +500)
                                .attr("y2", 10 + i*50+50)
                                .attr("stroke", "black")
                                .attr("stroke-width", 1)
                                .attr("fill", "none");
            }
/*
            var data1 = [
                {"x0": 310, "y0": 160, "x1": 310 , "y1": 210},
                {"x0": 360, "y0": 160, "x1": 360 , "y1": 210},
            ]

            var data2 = [
                {"x0": 360, "y0": 160, "x1": 360 , "y1": 210},
                {"x0": 410, "y0": 160, "x1": 410 , "y1": 210},
            ]

            var data3 = [
                {"x0": 310, "y0": 210, "x1": 310 , "y1": 260},
                {"x0": 360, "y0": 210, "x1": 360 , "y1": 260},
            ]

            var data4 = [
                {"x0": 360, "y0": 210, "x1": 360 , "y1": 260},
                {"x0": 410, "y0": 210, "x1": 410 , "y1": 260},
            ]

            var data5 = [
                {"x0": 510, "y0": 60, "x1": 510 , "y1": 110},
                {"x0": 560, "y0": 60, "x1": 560 , "y1": 110},
            ]

            var data6 = [
                {"x0": 760, "y0": 60, "x1": 760 , "y1": 110},
                {"x0": 810, "y0": 60, "x1": 810 , "y1": 110},
            ]

            var data7 = [
                {"x0": 510, "y0": 310, "x1": 510 , "y1": 360},
                {"x0": 560, "y0": 310, "x1": 560 , "y1": 360},
            ]

            var data8 = [
                {"x0": 760, "y0": 310, "x1": 760 , "y1": 360},
                {"x0": 810, "y0": 310, "x1": 810 , "y1": 360},
            ]

            var data = [
                {"x0": 660, "y0": 160, "x1": 660 , "y1": 210},
                {"x0": 710, "y0": 160, "x1": 710 , "y1": 210},
            ]
*/

            var data = [
                {"x0": 660, "y0": 160, "x1": 660 , "y1": 210},
                {"x0": 710, "y0": 160, "x1": 710 , "y1": 210},
            ]

            var data1 = [
                {"x0": 710, "y0": 160, "x1": 710 , "y1": 210},
                {"x0": 760, "y0": 160, "x1": 760 , "y1": 210},
            ]

            var data2 = [
                {"x0": 710, "y0": 110, "x1": 710 , "y1": 160},
                {"x0": 760, "y0": 110, "x1": 760 , "y1": 160},
            ]

            var data3 = [
                {"x0": 660, "y0": 210, "x1": 660 , "y1": 260},
                {"x0": 710, "y0": 210, "x1": 710 , "y1": 260},
            ]

            var data4 = [
                {"x0": 660, "y0": 260, "x1": 660 , "y1": 310},
                {"x0": 710, "y0": 260, "x1": 710 , "y1": 310},
            ]

            var data5 = [
                {"x0": 610, "y0": 260, "x1": 610 , "y1": 310},
                {"x0": 660, "y0": 260, "x1": 660 , "y1": 310},
            ]

            var area = d3.svg.area()
                        .x0(function(d){ return d.x0; })
                        .x1(function(d){ return d.x1; })
                        .y0(function(d){ return d.y0; })
                        .y1(function(d){ return d.y1; });



            d3.select("svg")
                .append("path")
                .attr("d", area(data))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(0))

            
            d3.select("svg")
                .append("path")
                .attr("d", area(data1))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(0))

            d3.select("svg")
                .append("path")
                .attr("d", area(data2))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(0))

            d3.select("svg")
                .append("path")
                .attr("d", area(data3))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(0))

                d3.select("svg")
                .append("path")
                .attr("d", area(data4))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(0))

                d3.select("svg")
                .append("path")
                .attr("d", area(data5))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(0))

 /*           d3.select("svg")
                .append("path")
                .attr("d", area(data5))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(0))

            d3.select("svg")
                .append("path")
                .attr("d", area(data6))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(1))

            d3.select("svg")
                .append("path")
                .attr("d", area(data7))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(2))

            d3.select("svg")
                .append("path")
                .attr("d", area(data8))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(3))



            d3.select("svg")
                .append("path")
                .attr("d", area(data))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.5)
                .attr("fill", color(5))




            d3.select("svg")
                .append("path")
                .attr("d", area(data1))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(0))

            d3.select("svg")
                .append("path")
                .attr("d", area(data2))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(1))

            d3.select("svg")
                .append("path")
                .attr("d", area(data3))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(2))
        
            d3.select("svg")
                .append("path")
                .attr("d", area(data4))
                .attr("stroke", "none")
                .attr("stroke-width", 1)
                .attr("opacity", 0.2)
                .attr("fill", color(3))




            svg.append("circle")
                .attr("cx", 10+25+500)
                .attr("cy", 10+25+50)
                .attr("r", 5)
                .attr("fill", color(0));

            svg.append("circle")
                .attr("cx", 310-25+500)
                .attr("cy", 10+25+50)
                .attr("r", 5)
                .attr("fill", color(1));

            svg.append("circle")
                .attr("cx", 10+25+500)
                .attr("cy", 310-25+50)
                .attr("r", 5)
                .attr("fill", color(2));

            svg.append("circle")
                .attr("cx", 310-25+500)
                .attr("cy", 310-25+50)
                .attr("r", 5)
                .attr("fill", color(3));


            for( var i = 0; i < 3; i++ ){
                var lines = svg.append("line")
                                .attr("x1", 310 + i*50)
                                .attr("y1", 160)
                                .attr("x2", 310 + i*50)
                                .attr("y2", 260)
                                .attr("stroke", "black")
                                .attr("stroke-width", 1)
                                .attr("fill", "none");

                svg.append("line")
                                .attr("x1", 310)
                                .attr("y1", 160 + i*50)
                                .attr("x2", 410)
                                .attr("y2", 160 + i*50)
                                .attr("stroke", "black")
                                .attr("stroke-width", 1)
                                .attr("fill", "none");
            }


            svg.append("circle")
                .attr("cx", 310+25)
                .attr("cy", 160+25)
                .attr("r", 5)
                .attr("fill", color(0));

            svg.append("circle")
                .attr("cx", 410-25)
                .attr("cy", 160+25)
                .attr("r", 5)
                .attr("fill", color(1));

            svg.append("circle")
                .attr("cx", 310+25)
                .attr("cy", 260-25)
                .attr("r", 5)
                .attr("fill", color(2));

            svg.append("circle")
                .attr("cx", 410-25)
                .attr("cy", 260-25)
                .attr("r", 5)
                .attr("fill", color(3));
   */
  /*          var width = 500, height = 500, margin = 25;
            var xAxis, yAxis, xAxisLength, yAxisLength;

            var svg = d3.select("body").append("svg")
                        .attr("class", "axis")
                        .attr("width", width)
                        .attr("height", height);

            function renderXAxis(){
                xAxisLength = width - 2 * margin;

                var scale = d3.scale.linear()
                                .domain([0, 100])
                                .range([0, xAxisLength]);

                xAxis = d3.svg.axis()
                        .scale(scale)
                        .tickSubdivide(0)
                        .orient("bottom");

                svg.append("g")
                    .attr("class", "x-axis")
                    .attr("transform", function(){
                        return "translate(" + margin + "," + (height - margin) + ")";
                    })
                    .call(xAxis);
            }

            function renderYAxis(){
                yAxisLength = height - 2 * margin;

                var scale = d3.scale.linear()
                                .domain([100, 0])
                                .range([0, yAxisLength]);

                yAxis = d3.svg.axis()
                            .scale(scale)
                        //    .tickSubdivide(1)
                        //    .orient("left");

                svg.append("g")
                    .attr("class", "y-axis")
                    .attr("transform", function(){
                        return "translate(" + margin + "," + margin + ")";
                    })
                    .call(yAxis);
            }

            function rescale(){
                var max = Math.round(Math.random() * 100);

                xAxis.scale().domain([0, max]);
                svg.select("g.x-axis")
                    .transition()
                    .call(xAxis);

                yAxis.scale().domain([max, 0]);
                svg.select("g.y-axis")
                    .transition()
                    .call(yAxis);

                renderXGridlines();
                renderYGridlines();
            }

            function renderXGridlines(){
                var lines = d3.selectAll("g.x-axis g.tick")
                                .select("line.grid-line")
                                .remove();

                lines = d3.selectAll("g.x-axis g.tick")
                            .append("line")
                            .classed("grid-line", true);

                lines.attr("x1", 0)
                        .attr("y1", 0)
                        .attr("x2", 0)
                        .attr("y2", -yAxisLength);
            }

            function renderYGridlines(){
                var lines = d3.selectAll("g.y-axis g.tick")
                                .select("line.grid-line").remove();

                lines = d3.selectAll("g.y-axis g.tick")
                            .append("line")
                            .classed("grid-line", true);

                lines.attr("x1", 0)
                    .attr("y1", 0)
                    .attr("x2", xAxisLength)
                    .attr("y2", 0);
            }

            renderYAxis();
            renderXAxis();
            renderXGridlines();
            renderYGridlines();
*/
        </script>

        <div class="control-group">
            <button onclick="rescale()">Rescale</button>
        </div>

    </body>
</html>